{% extends 'rome/base.html' %}
{% load markdown_filters %}
{% block content %}
    <h2>Résultats de la recherche pour "{{ query }}"</h2>
    {% if results %}
        <ul>
            {% for article in results %}
            <div class="card mb-4">
                <figure>
                    <img src="{{ article.image.url }}" class="card-img-top float-{{ article.image_position }}" alt="{{ article.title }}">
                    <figcaption class="card-img-caption">
                        <!-- Ajoutez votre description d'image ici -->
                        {{ article.image_description }}
                    </figcaption>
                </figure>
                <div class="card-body">
                    <h2 class="card-title">{{ article.title }}</h2>
                    <p class="card-text meta">Publié le {{ article.date|date:"j F Y" }} par <a class="custom-author" href="{% url 'author_detail' pk=article.author.id %}">{{ article.author.name }}</a></p>
                    <p class="card-text">{{ article.content|markdown|safe|truncatewords:30 }}</p>
                    {% comment %} <p class="card-text">{{ article.category }}</p> {% endcomment %}
                    {% if article.category == 'Itineraire' %}
                        {% comment %} <p>Catégorie de l'article : Itineraire</p> {% endcomment %}
                        <a href="{% url 'itineraire_detail' pk=article.pk %}" class="btn btn-primary custom-btn">Lire la suite</a>
                    {% elif article.category == 'Article' %}
                        {% comment %} <p>Catégorie de l'article : {{ article.category }}</p> {% endcomment %}
                        <a href="{% url 'article_detail' pk=article.pk %}" class="btn btn-primary custom-btn">Lire la suite</a>
                    {% elif article.category == 'Histoire' %}
                        {% comment %} <p>Catégorie de l'article : {{ article.category }}</p> {% endcomment %}
                        <a href="{% url 'histoire_detail' pk=article.pk %}" class="btn btn-primary custom-btn">Lire la suite</a>
                    {% else %}
            
                    {% endif %}
            
            
            </div>
            {% endfor %}
        </ul>
    {% else %}
        <p>Aucun résultat trouvé.</p>
    {% endif %}
{% endblock %}
